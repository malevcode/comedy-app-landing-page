import React, { useState, useEffect } from 'react';
import { Search, Filter, CheckCircle } from 'lucide-react';
import { Alert, AlertDescription } from '@/components/ui/alert';

// Sample data structure for open mics
// In a real application, this would be fetched from your Google Sheet
const openMics = [
  {
    name: "Grisly Pear",
    day: "Sunday",
    time: "2:00 PM",
    latestItGoes: "3:30 PM",
    venueName: "Grisly Pear",
    borough: "Manhattan",
    neighborhood: "Greenwich Village",
    location: "107 MacDougal Street",
    cost: "$5 cash",
    stageTime: "5 minutes",
    signUpInstructions: "in person only"
  },
  {
    name: "Comedy Shop",
    day: "Sunday",
    time: "2:30 PM",
    latestItGoes: "4:00 PM",
    venueName: "Comedy Shop",
    borough: "Manhattan",
    neighborhood: "Greenwich Village",
    location: "167 Bleecker Street",
    cost: "$7.62 but you get a free drink or fries",
    stageTime: "5 minutes",
    signUpInstructions: "https://reservations.waivermaster.com/book/?qs=a44dcec9-0cb5-4773-bf53-c734db1dc10a%7C22b1df29-287a-465b-95ad-a94a46f45e20%7C1961fdf3-d94c-47db-afa2-59a679580d45&oqs=evd%3D2024-07-12%26evt%3D18%3A00&_gl=1*g0fy8f*_gcl_au*MTA3MzMwNzM5LjE3MTk0NTkzNzY.*_ga*MTA1MjU3NTYxOC4xNzE5NDU5Mzc2*_ga_RVSSW2PKR7*MTcyMDgxODE5Mi4yLjAuMTcyMDgxODE5Ni4wLjAuMA.."
  },
  {
    name: "Greenwich Village Comedy Club",
    day: "Sunday",
    time: "3:00 PM",
    latestItGoes: "4:45 PM",
    venueName: "Greenwich Village Comedy Club",
    borough: "Manhattan",
    neighborhood: "Greenwich Village",
    location: "126 MacDougal Street",
    cost: "$5 cash",
    stageTime: "5 minutes",
    signUpInstructions: "Email DrewAndPetermic@gmail.com"
  },
  {
    name: "Comedy Shop",
    day: "Sunday",
    time: "4:00 PM",
    latestItGoes: "5:30 PM",
    venueName: "Comedy Shop",
    borough: "Manhattan",
    neighborhood: "Greenwich Village",
    location: "167 Bleecker Street",
    cost: "$7.62 but you get a free drink or fries",
    stageTime: "5 minutes",
    signUpInstructions: "https://comedyshopnyc.com/events/"
  },
  {
    name: "Fear City Comedy Club",
    day: "Sunday",
    time: "4:00 PM",
    latestItGoes: "5:30 PM",
    venueName: "Fear City Comedy Club",
    borough: "Manhattan",
    neighborhood: "Lower East Side",
    location: "17 Essex Street",
    cost: "$5 cash",
    stageTime: ""
  },
  {
    name: "Producer's Club",
    day: "Sunday",
    time: "5:00 PM",
    latestItGoes: "6:00 PM",
    venueName: "Producer's Club",
    borough: "Manhattan",
    neighborhood: "Hell's Kitchen",
    location: "328 W 44th Street",
    cost: "$5 cash",
    stageTime: "5 minutes",
    signUpInstructions: "in person only"
  },
  {
    name: "Bushwick Comedy Club",
    day: "Sunday",
    time: "6:00 PM",
    latestItGoes: "7:00 PM",
    venueName: "Bushwick Comedy Club",
    borough: "Brooklyn",
    neighborhood: "Bushwick",
    location: "259 Melrose St",
    cost: "$5 (NO CASH)",
    stageTime: "5 minutes",
    signUpInstructions: "www.bushwickcomedy.com"
  },
  {
    name: "Party Salad",
    day: "Sunday",
    time: "6:00 PM",
    latestItGoes: "8:00 PM",
    venueName: "Party Salad",
    borough: "Brooklyn",
    neighborhood: "Williamsburg",
    location: "790 Metropolitan Ave",
    cost: "Free (buy something at the bar, please)",
    stageTime: "",
    signUpInstructions: "signup there"
  }
  // Add the remaining open mics similarly...
];

export default function ComedyGeniusLanding() {
  const [email, setEmail] = useState('');
  const [instagram, setInstagram] = useState('');
  const [yearsInComedy, setYearsInComedy] = useState('');
  const [openMicsPerMonth, setOpenMicsPerMonth] = useState('');
  const [spentPerMonth, setSpentPerMonth] = useState('');
  const [showSuccess, setShowSuccess] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  const [filteredMics, setFilteredMics] = useState(sampleOpenMics);
  const [showOpenMics, setShowOpenMics] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    // In a real application, this would send data to your Google Sheet
    console.log('Form submitted:', { email, instagram, yearsInComedy, openMicsPerMonth, spentPerMonth });
    setShowSuccess(true);
    setTimeout(() => setShowSuccess(false), 3000);
  };

  const handleSearch = (term) => {
    setSearchTerm(term);
    const filtered = sampleOpenMics.filter(mic =>
      mic.name.toLowerCase().includes(term.toLowerCase()) ||
      mic.location.toLowerCase().includes(term.toLowerCase())
    );
    setFilteredMics(filtered);
  };

  return (
    <div className="max-w-4xl mx-auto p-6">
      <h1 className="text-3xl font-bold text-center mb-8">ComedyGenius: Elevate Your Comedy Career</h1>
      
      <div className="bg-gray-100 rounded-lg p-6 mb-6 cursor-pointer" onClick={() => setShowOpenMics(!showOpenMics)}>
        <h2 className="text-xl font-semibold flex items-center">
          <span className="mr-2">üé§</span> Open Mic Finder
        </h2>
        <p className="mb-4">Discover open mics and shows in your area with ease. Never miss an opportunity to perform and hone your craft.</p>
        
        {showOpenMics && (
          <div className="mt-4">
            <div className="flex gap-2 mb-4">
              <input
                type="text"
                placeholder="Search open mics..."
                className="flex-1 p-2 border rounded"
                value={searchTerm}
                onChange={(e) => handleSearch(e.target.value)}
              />
              <button className="bg-blue-500 text-white p-2 rounded">
                <Search size={20} />
              </button>
            </div>
            
            <div className="space-y-2">
              {filteredMics.map((mic, index) => (
                <div key={index} className="bg-white p-4 rounded shadow">
                  <h3 className="font-semibold">{mic.name}</h3>
                  <p>{mic.location} - {mic.day} at {mic.time}</p>
                  <p>Cost: ${mic.cost}</p>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>

      {/* Other features */}
      <div className="bg-gray-100 rounded-lg p-6 mb-6">
        <h2 className="text-xl font-semibold"><span className="mr-2">üéôÔ∏è</span> Smart Transcription</h2>
        <p>Automatically transcribe your performances with joke identifiers. Analyze your material and track your progress over time.</p>
      </div>

      <div className="bg-gray-100 rounded-lg p-6 mb-6">
        <h2 className="text-xl font-semibold"><span className="mr-2">üïµÔ∏è</span> Plagiarism Checker</h2>
        <p>Ensure your material is original with our extensive database of published comedy specials. Avoid parallel thinking and stand out from the crowd.</p>
      </div>

      <div className="bg-blue-500 text-white p-8 rounded-lg text-center">
        <h2 className="text-2xl font-bold mb-4">Ready to Take Your Comedy to the Next Level?</h2>
        <p className="mb-4">Be among the first to know when ComedyGenius launches. Sign up now!</p>
        
        <form onSubmit={handleSubmit} className="space-y-4">
          <input
            type="email"
            placeholder="Your Email"
            required
            className="w-full p-2 rounded text-black"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
          />
          <input
            type="text"
            placeholder="Instagram Handle"
            required
            className="w-full p-2 rounded text-black"
            value={instagram}
            onChange={(e) => setInstagram(e.target.value)}
          />
          <input
            type="number"
            placeholder="Years in Comedy"
            className="w-full p-2 rounded text-black"
            value={yearsInComedy}
            onChange={(e) => setYearsInComedy(e.target.value)}
          />
          <input
            type="number"
            placeholder="Open mics per month"
            className="w-full p-2 rounded text-black"
            value={openMicsPerMonth}
            onChange={(e) => setOpenMicsPerMonth(e.target.value)}
          />
          <input
            type="number"
            placeholder="$ spent on mics per month"
            className="w-full p-2 rounded text-black"
            value={spentPerMonth}
            onChange={(e) => setSpentPerMonth(e.target.value)}
          />
          <button type="submit" className="w-full bg-green-500 text-white p-2 rounded hover:bg-green-600">
            Join the Waitlist
          </button>
        </form>
      </div>

      {showSuccess && (
        <Alert className="mt-4 bg-green-100 border-green-500">
          <CheckCircle className="h-4 w-4" />
          <AlertDescription>
            Thanks for signing up! We'll be in touch soon.
          </AlertDescription>
        </Alert>
      )}
    </div>
  );
}